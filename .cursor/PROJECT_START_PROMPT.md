# プロジェクト開始用プロンプト

このドキュメントは、プロジェクトを開始する際にCursorのチャット（`Cmd+L` または `Cmd+K`）で使用する具体的なプロンプトを提供します。

## 使用方法

1. リポジトリを初期化（`pnpm init`、ディレクトリ作成など）
2. `.cursor/mcp.json`を設定
3. Cursorのチャットを開く（`Cmd+L` または `Cmd+K`）
4. 以下のプロンプトをコピー＆ペーストして実行

## プロンプト1: モノレポ構造の構築（基本）

```
Sequential Thinkingを使って、このペットアプリのモノレポ構造をどう構築すべきか、
turbo.json や pnpm-workspace.yaml の内容を含めて思考（Thought）をステップごとに書き出して。
その計画に合意できたら、一気にファイルを生成してほしい。
```

## プロンプト0: Phase 1の核心機能の実装（推奨：最初に実装）

```
ユーザーストーリードキュメント（USER_STORIES.md）の US-004（ペット登録）から US-008（食事記録）までの
一連の画面フローを実装してください。

特に、各ストーリーの『受け入れ基準』と『体験価値』を重視して、
単なるデータ入力フォームではなく、ユーザーの体験価値が込められた機能を作成してください。

Sequential Thinkingを使って、実装手順を思考ステップごとに書き出してから実装してください。

実装する機能：
- US-004: ペット登録
- US-005: ペット一覧表示
- US-006: ペット詳細表示
- US-007: ペット編集
- US-008: 食事記録

これにより、「登録して、記録して、見る」というアプリの心臓部を動かします。
```

## プロンプト2: モノレポ構造の構築（詳細版）

```
Sequential Thinkingを使って、以下の手順でペット管理アプリのモノレポ構造を構築してください：

1. 思考ステップ1: Turborepo + pnpmのモノレポ構造を設計
   - apps/expo (React Native Expo)
   - apps/admin (Next.js、ローカルのみ)
   - packages/backend (Convex - 独立パッケージ)
   - packages/ui (Tamagui共通コンポーネント)
   - packages/utils (ビジネスロジック)
   - packages/tsconfig (TypeScript共通設定)

2. 思考ステップ2: turbo.jsonの設定を設計
   - 依存関係の定義
   - キャッシュ設定
   - 並列実行の最適化

3. 思考ステップ3: pnpm-workspace.yamlの設定を設計
   - ワークスペースの定義
   - パッケージ間の依存関係

4. 思考ステップ4: 各パッケージのpackage.jsonを設計
   - 依存関係の定義
   - スクリプトの設定

5. 思考ステップ5: .gitignoreの設定
   - 環境変数ファイルの除外
   - ビルド成果物の除外

思考ステップをすべて書き出したら、その計画に基づいて一気にファイルを生成してください。
```

## プロンプト3: Convexスキーマの設計

```
Sequential Thinkingを使って、ペット管理アプリのConvexスキーマを設計してください：

1. 思考ステップ1: エンティティの特定
   - users, pets, pet_members, activities, products, reviews
   - chat_threads, chat_messages, knowledge_base (AI相談用)
   - articles (コラム機能用)
   - follows, likes (SNS機能用)

2. 思考ステップ2: 各テーブルのフィールド設計
   - 必須フィールドとオプションフィールド
   - 型定義（v.string(), v.id()等）

3. 思考ステップ3: インデックスの設計
   - クエリパフォーマンスの最適化
   - ベクトル検索用のインデックス（knowledge_base）

4. 思考ステップ4: リレーションシップの設計
   - 外部キーの関係
   - 参照整合性

思考ステップをすべて書き出したら、packages/backend/convex/schema.ts を生成してください。
```

## プロンプト4: 共通UIコンポーネントの設計

```
Sequential Thinkingを使って、Tamaguiを使った共通UIコンポーネントの設計を考えてください：

1. 思考ステップ1: 必要なコンポーネントの特定
   - PetCard (ペット情報カード)
   - ActivityCard (活動記録カード)
   - Button, Input, Card などの基本コンポーネント

2. 思考ステップ2: コンポーネントの構造設計
   - propsの型定義
   - Tamaguiコンポーネントの使用

3. 思考ステップ3: スタイリングの設計
   - テーマの統一
   - レスポンシブ対応

4. 思考ステップ4: エクスポートの設計
   - packages/ui/src/index.ts からのエクスポート

思考ステップをすべて書き出したら、packages/ui/src/ にコンポーネントを生成してください。
```

## プロンプト5: 開発環境のセットアップ

```
Sequential Thinkingを使って、開発環境のセットアップ手順を考えてください：

1. 思考ステップ1: 依存関係のインストール
   - pnpm install の実行
   - 各パッケージの依存関係の確認

2. 思考ステップ2: 環境変数の設定
   - .env.example の作成
   - 必要な環境変数のリストアップ

3. 思考ステップ3: Convexの初期化
   - packages/backend での convex dev の実行
   - スキーマのデプロイ

4. 思考ステップ4: 開発サーバーの起動
   - pnpm dev の実行
   - 各アプリの起動確認

思考ステップをすべて書き出したら、セットアップ手順を実行してください。
```

## 期待される動作

これらのプロンプトを実行すると：

1. **Sequential Thinking MCPが自動的に使用される**
   - AIが思考ステップを刻みながら計画を立てる
   - 各ステップで「Thought: ...」という形式で思考過程が表示される

2. **計画の確認と承認**
   - 思考ステップがすべて書き出されたら、計画を確認
   - 問題がなければ「その計画に基づいて実装してください」と指示

3. **一気にファイル生成**
   - 計画に基づいて必要なファイルが一気に生成される
   - **数分でバックエンド、フロント、管理画面の土台が組み上がる**

## トラブルシューティング

### Sequential Thinking MCPが動作しない

**確認事項**:
- `.cursor/mcp.json`が設定されているか
- Cursorを再起動したか
- プロンプトに「Sequential Thinkingを使って」と明記したか

**解決方法**:
1. `.cursor/mcp.json`を確認
2. Cursorを再起動
3. プロンプトを再度実行

### 生成されたファイルに問題がある

**確認事項**:
- 思考ステップが正しく書き出されているか
- 計画に問題がないか

**解決方法**:
1. 思考ステップを確認
2. 問題があれば修正を指示
3. 再度実行

## 参考

- [.cursor/PROJECT_INITIALIZATION.md](./PROJECT_INITIALIZATION.md) - プロジェクト初期化ガイド
- [.cursor/MCP_REPOSITORY_SETUP.md](./MCP_REPOSITORY_SETUP.md) - MCP設定をリポジトリに含める方法
- [SETUP_CHECKLIST.md](../SETUP_CHECKLIST.md) - セットアップチェックリスト
