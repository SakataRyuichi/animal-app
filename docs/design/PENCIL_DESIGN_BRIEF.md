# Pencilデザインブリーフ

**📚 ドキュメントインデックス**: [DOCUMENTATION_INDEX.md](../../DOCUMENTATION_INDEX.md)

## 概要

このドキュメントは、Pencil.devでデザインを作成する際に参照する、画面単位のユーザーストーリーとデザイン要件をまとめたドキュメントです。

各画面のデザインを作成する際は、このドキュメントから該当する画面のセクションを参照してください。

**関連ドキュメント**:
- [USER_STORIES.md](../stories/USER_STORIES.md): ユーザーストーリーの詳細
- [APP_DIRECTORY_STRUCTURE.md](../app-structure/APP_DIRECTORY_STRUCTURE.md): アプリディレクトリ構成と画面マッピング
- [DESIGN_DOCUMENT.md](./DESIGN_DOCUMENT.md): アプリ設計の詳細
- [.cursor/PENCIL_SETUP.md](./.cursor/PENCIL_SETUP.md): Pencil.devセットアップガイド

---

## デザインの基本方針

### 全画面共通のデザイン原則

1. **温かみのあるデザイン**
   - 柔らかい色（暖色系を基調）
   - 丸みのある角（Radius 20px以上を推奨）
   - 優しいグラデーション

2. **アクセシビリティ**
   - 十分なコントラスト比
   - タップ領域の最小サイズ（44x44px以上）
   - 読みやすいフォントサイズ

3. **一貫性**
   - Tamaguiコンポーネントを使用（`packages/ui`から共有）
   - 統一されたスペーシングシステム
   - 統一されたカラーパレット

4. **モバイルファースト**
   - スマートフォンでの使用を最優先
   - 片手操作を考慮したレイアウト
   - スワイプジェスチャーを活用

---

## 画面別デザインブリーフ

**注意**: このドキュメントには32画面のデザインブリーフが記載されていますが、動画機能追加により35画面に拡張されました ✅ **2026年追加**

### 認証関連

#### 1. ユーザー登録画面 (`app/(auth)/register.tsx`)

**ユーザーストーリー**: US-001

**受け入れ基準**:
- メールアドレス、パスワード、ユーザー名を入力できる
- パスワードの強度が表示される
- 利用規約とプライバシーポリシーへの同意チェックボックスがある
- 登録ボタンが大きく、わかりやすい位置にある
- エラーメッセージが分かりやすく表示される

**体験価値**:
- **簡単さ**: 最小限の入力で登録できる
- **安心感**: 利用規約とプライバシーポリシーへの同意により、信頼感が得られる

**デザイン要件**:
- シンプルで分かりやすいフォームレイアウト
- 入力フィールドは大きく、タップしやすい
- エラー状態の視覚的フィードバック（赤い枠線、エラーメッセージ）
- 利用規約へのリンクは明確に表示
- 登録ボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/register.pen`

---

#### 2. ログイン画面 (`app/(auth)/login.tsx`)

**ユーザーストーリー**: US-002

**受け入れ基準**:
- メールアドレスとパスワードを入力できる
- 「パスワードを忘れた場合」へのリンクがある
- ログインボタンが大きく、わかりやすい位置にある
- エラーメッセージが分かりやすく表示される
- 新規登録への導線がある

**体験価値**:
- **速さ**: 素早くログインできる
- **安心感**: セキュアな認証により、安心して利用できる

**デザイン要件**:
- シンプルで分かりやすいフォームレイアウト
- 入力フィールドは大きく、タップしやすい
- エラー状態の視覚的フィードバック
- 「パスワードを忘れた場合」へのリンクは控えめに表示
- 新規登録への導線は明確に表示

**デザインファイル**: `designs/screens/login.pen`

---

### メインタブ

#### 3. ホーム/ダッシュボード (`app/(tabs)/index.tsx`)

**ユーザーストーリー**: US-016

**受け入れ基準**:
- 今日のサマリー（記録数、ポイント獲得数など）が表示される
- 最近の活動ログが表示される
- クイックアクション（記録ボタン）が表示される
- ペットのプロフィール画像が表示される
- 統計情報へのリンクがある

**体験価値**:
- **一目で分かる**: 今日の状況が一目で分かる
- **効率性**: クイックアクションから素早く記録できる

**デザイン要件**:
- カード型レイアウトで情報を整理
- サマリーカードは大きく、目立つ位置に配置
- クイックアクションボタンは固定位置（画面下部）に配置
- ペットのプロフィール画像は丸型で表示
- 統計情報へのリンクは控えめに表示

**デザインファイル**: `designs/screens/home.pen`

---

#### 4. ペット一覧 (`app/(tabs)/pets.tsx`)

**ユーザーストーリー**: US-005

**受け入れ基準**:
- 登録済みのペットが一覧表示される
- 各ペットのプロフィール画像、名前、種別が表示される
- ペットをタップすると詳細画面に遷移する
- 新規ペット登録ボタンが表示される
- ペットがいない場合の空状態が表示される

**体験価値**:
- **視認性**: ペットの情報が一目で分かる
- **効率性**: 素早くペットを選択できる

**デザイン要件**:
- グリッドまたはリストレイアウト
- ペットカードは大きく、タップしやすい
- プロフィール画像は丸型で表示
- 新規ペット登録ボタンは目立つ位置（FABまたは固定ボタン）に配置
- 空状態は優しいメッセージとイラストで表示

**デザインファイル**: `designs/screens/pets-list.pen`

---

#### 5. タイムライン (`app/(tabs)/timeline.tsx`)

**ユーザーストーリー**: US-013, US-013-1

**受け入れ基準**:
- 時系列順に活動ログが表示される
- 各ログにペット名、活動タイプ、時刻が表示される
- フィルターボタンが表示される（ペット、活動タイプで絞り込み）
- リマインダーの完了状況が表示される
- ログをタップすると詳細画面に遷移する
- 広告が表示される（無料ユーザーの場合、US-018）

**体験価値**:
- **振り返り**: 過去の記録を振り返れる
- **検索性**: フィルターで素早く目的の記録を見つけられる

**デザイン要件**:
- タイムライン形式のレイアウト
- 各ログカードは大きく、情報が読みやすい
- フィルターボタンは上部に固定
- 広告は控えめに、コンテンツの中に自然に配置
- リマインダーの完了状況は視覚的に分かりやすく表示（チェックマーク、色分けなど）

**デザインファイル**: `designs/screens/timeline.pen`

---

#### 6. コラム一覧 (`app/(tabs)/articles.tsx`)

**ユーザーストーリー**: US-026, US-028

**受け入れ基準**:
- コラムが一覧表示される
- 各コラムにタイトル、サムネイル画像、公開日が表示される
- レコメンドコラムが表示される
- コラムをタップすると詳細画面に遷移する
- 検索ボタンが表示される

**体験価値**:
- **発見**: 信頼できる情報を発見できる
- **学習**: ペットの健康管理について学べる

**デザイン要件**:
- カード型レイアウト
- サムネイル画像は大きく、目を引く
- レコメンドコラムは特別なバッジや色で強調
- 検索ボタンは上部に固定
- 読み込み状態のスケルトンローディングを表示

**デザインファイル**: `designs/screens/articles-list.pen`

---

#### 7. プロフィール (`app/(tabs)/profile.tsx`)

**ユーザーストーリー**: US-003, US-071

**受け入れ基準**:
- ユーザー名、プロフィール画像が表示される
- 所持ポイントが大きく表示される（US-083）
- 獲得したバッジが表示される
- 所有しているアイテムが表示される
- 設定へのリンクがある

**体験価値**:
- **達成感**: 獲得したバッジやアイテムを確認できる
- **透明性**: ポイント残高が明確に分かる

**デザイン要件**:
- プロフィール画像は大きく、上部に配置
- ポイント数は大きく、目立つ位置に表示
- バッジはグリッド形式で表示
- 所有アイテムはカード形式で表示
- 設定へのリンクは下部に配置

**デザインファイル**: `designs/screens/profile.pen`

---

### ペット管理

#### 8. ペット登録 (`app/pets/register.tsx`)

**ユーザーストーリー**: US-004

**受け入れ基準**:
- ペット名、種別、品種、性別、誕生日を入力できる
- プロフィール画像をアップロードできる
- 種別に応じて入力項目が動的に変わる
- バリデーションエラーが表示される
- 登録ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **簡単さ**: 最小限の入力で登録できる
- **柔軟性**: 種別に応じた入力項目により、適切な情報を登録できる

**デザイン要件**:
- ステップ形式または単一フォーム
- 入力フィールドは大きく、タップしやすい
- 種別選択は視覚的（アイコン付き）に表示
- プロフィール画像アップロードは大きく、分かりやすい
- エラー状態の視覚的フィードバック

**デザインファイル**: `designs/screens/pet-register.pen`

---

#### 9. ペット詳細 (`app/pets/[id]/index.tsx`)

**ユーザーストーリー**: US-005, US-005-1, US-005-2, US-005-3

**受け入れ基準**:
- ペットのプロフィール情報が表示される
- 年齢が自動計算されて表示される（US-005-1）
- バースデー当日は祝福の演出が表示される（US-005-2）
- 成長の節目（1才、5才など）で通知が表示される（US-005-3）
- クイックアクション（記録ボタン）が表示される
- 統計情報へのリンクがある

**体験価値**:
- **愛着**: ペットの情報を確認でき、愛着が深まる
- **祝い**: バースデーや成長の節目を祝える

**デザイン要件**:
- プロフィール画像は大きく、上部に配置
- 年齢は大きく、目立つ位置に表示
- バースデー演出は控えめに、祝福の気持ちが伝わるデザイン
- クイックアクションボタンは固定位置（画面下部）に配置
- 統計情報へのリンクは控えめに表示

**デザインファイル**: `designs/screens/pet-detail.pen`

---

#### 10. ペット編集 (`app/pets/[id]/edit.tsx`)

**ユーザーストーリー**: US-006

**受け入れ基準**:
- ペットの情報を編集できる
- プロフィール画像を変更できる
- 変更内容が保存される
- キャンセルボタンがある

**体験価値**:
- **柔軟性**: ペットの情報をいつでも更新できる
- **正確性**: 最新の情報を保持できる

**デザイン要件**:
- 登録画面と同様のフォームレイアウト
- 既存の情報が事前入力されている
- 保存ボタンとキャンセルボタンが明確に表示
- 変更内容の確認ダイアログ（必要に応じて）

**デザインファイル**: `designs/screens/pet-edit.pen`

---

#### 11. 統計情報 (`app/pets/[id]/statistics.tsx`)

**ユーザーストーリー**: US-017, US-072

**受け入れ基準**:
- 体重推移グラフが表示される（US-017）
- 記録数の統計が表示される
- 期間を選択して統計を表示できる
- グラフはインタラクティブ（タップで詳細を表示）

**体験価値**:
- **可視化**: ペットの健康状態が視覚的に分かる
- **分析**: データを分析して健康管理に役立てられる

**デザイン要件**:
- グラフは大きく、読みやすい
- 期間選択は上部に配置
- 統計カードはグリッド形式で表示
- グラフはインタラクティブ（タップで詳細表示）
- 色分けで情報を整理

**デザインファイル**: `designs/screens/pet-statistics.pen`

---

### 活動ログ記録

#### 12. 食事記録 (`app/pets/[id]/activities/feeding.tsx`)

**ユーザーストーリー**: US-008, US-008-1

**受け入れ基準**:
- 餌の種類、量、時刻を入力できる
- 前回の入力内容がデフォルトで表示される
- 画像をアップロードできる（US-008-1）
- 動画をアップロードできる（US-092） ✅ **2026年追加 - Cloudflare R2移行**
- 記録ボタンが大きく、わかりやすい位置にある
- 記録後、ポイント獲得が表示される（US-068）

**体験価値**:
- **効率性**: 前回の入力内容を再利用して素早く記録できる
- **記録の楽しさ**: 画像・動画を添付して記録を楽しめる

**デザイン要件**:
- シンプルで分かりやすいフォームレイアウト
- 前回の入力内容は視覚的に分かりやすく表示（グレーアウト、または別セクション）
- 画像・動画アップロードは大きく、分かりやすい
- 動画アップロード時は自動圧縮の進捗が表示される ✅ **2026年追加**
- 動画の長さ制限（無料: 15秒、プレミアム: 60秒）が視覚的に分かる ✅ **2026年追加**
- 記録ボタンは目立つ色（ブランドカラー）を使用
- ポイント獲得時はアニメーションで通知

**デザインファイル**: `designs/screens/feeding-record.pen`

---

#### 13. トイレ記録 (`app/pets/[id]/activities/toilet.tsx`)

**ユーザーストーリー**: US-009

**受け入れ基準**:
- ペットの種別に応じて選択肢が動的に変わる
- 視覚的なアイコンで状態を選択できる
- 異常な状態を記録した場合、AI相談への導線が表示される
- 記録ボタンが大きく、わかりやすい位置にある
- 記録後、ポイント獲得が表示される（US-068）

**体験価値**:
- **専門知識がなくても記録できる**: 視覚的なアイコンで直感的に記録できる
- **安心感**: 異常な状態を記録した場合、AI相談への導線により安心感が得られる

**デザイン要件**:
- 種別に応じた選択肢を大きく、視覚的に表示
- アイコンは大きく、タップしやすい
- 異常な状態を記録した場合、警告色（オレンジ、赤）で表示
- AI相談への導線は明確に表示（ボタンまたはバナー）
- 記録ボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/toilet-record.pen`

---

#### 14. 散歩記録 (`app/pets/[id]/activities/walk.tsx`)

**ユーザーストーリー**: US-010

**受け入れ基準**:
- 散歩の時刻、距離、時間を入力できる
- 位置情報を取得できる（オプション）
- 画像をアップロードできる
- 記録ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **記録の楽しさ**: 散歩の記録を楽しめる
- **振り返り**: 過去の散歩記録を振り返れる

**デザイン要件**:
- シンプルで分かりやすいフォームレイアウト
- 距離と時間の入力は大きく、分かりやすい
- 位置情報取得はオプションとして控えめに表示
- 画像アップロードは大きく、分かりやすい

**デザインファイル**: `designs/screens/walk-record.pen`

---

#### 15. 日記投稿 (`app/pets/[id]/activities/journal.tsx`)

**ユーザーストーリー**: US-011, US-073

**受け入れ基準**:
- シーン（お散歩、お昼寝、遊び、食事など）を選択できる
- 感情（楽しい、愛しい、混乱、悲しいなど）を選択できる
- 時間帯（朝、昼、夕方、夜、深夜）を選択できる
- 場所（おうち、公園、ドッグラン、病院、旅先）を選択できる
- テキスト入力も可能（任意）
- 画像をアップロードできる
- 記録ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **簡単さ**: 「書く」のではなく「選ぶ」ことで簡単に記録できる
- **検索性**: タグにより後で検索しやすい

**デザイン要件**:
- シーンと感情は大きく、視覚的に表示（アイコン付き）
- 時間帯と場所は小さめのボタンで表示
- テキスト入力は控えめに（任意入力）
- 画像アップロードは大きく、分かりやすい
- コンテキストスタンプ（シーン+感情のセット）も選択可能

**デザインファイル**: `designs/screens/journal-record.pen`

---

#### 16. ケア記録 (`app/pets/[id]/activities/care.tsx`)

**ユーザーストーリー**: US-012

**受け入れ基準**:
- ケアの種類（爪切り、ブラッシング、お風呂など）を選択できる
- ケアの時刻を入力できる
- メモを入力できる（任意）
- 画像をアップロードできる
- 動画をアップロードできる（US-092） ✅ **2026年追加 - Cloudflare R2移行**
- 記録ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **記録の楽しさ**: ケアの記録を楽しめる
- **振り返り**: 過去のケア記録を振り返れる
- **動画記録**: 動画でケアの様子を記録できる ✅ **2026年追加**

**デザイン要件**:
- ケアの種類は大きく、視覚的に表示（アイコン付き）
- 時刻入力は大きく、分かりやすい
- メモ入力は控えめに（任意入力）
- 画像・動画アップロードは大きく、分かりやすい
- 動画アップロード時は自動圧縮の進捗が表示される ✅ **2026年追加**
- 動画の長さ制限（無料: 15秒、プレミアム: 60秒）が視覚的に分かる ✅ **2026年追加**

**デザインファイル**: `designs/screens/care-record.pen`

---

### タイムライン

#### 17. 活動ログ詳細 (`app/timeline/[id].tsx`)

**ユーザーストーリー**: US-077, US-078, US-042, US-075

**受け入れ基準**:
- 活動ログの詳細情報が表示される
- 編集ボタンが表示される（US-077）
- 削除ボタンが表示される（US-078）
- リアクションボタンが表示される（US-042, US-075）
- 画像が大きく表示される
- 動画が再生できる（US-093） ✅ **2026年追加 - Cloudflare R2移行**
- コメント機能（将来機能）への導線がある

**体験価値**:
- **詳細確認**: 記録の詳細を確認できる
- **編集・削除**: 間違った記録を修正できる
- **動画再生**: 動画でペットの動きや表情を振り返れる ✅ **2026年追加**

**デザイン要件**:
- 詳細情報は大きく、読みやすい
- 画像は大きく、タップで拡大表示
- 動画はサムネイル表示され、タップで再生 ✅ **2026年追加**
- 動画再生時は全画面モードで再生できる ✅ **2026年追加**
- 編集・削除ボタンは上部に配置
- リアクションボタンは下部に固定
- 長押しで複数のリアクションタイプから選択可能

**デザインファイル**: `designs/screens/activity-detail.pen`

---

#### 18. フィルター設定 (`app/timeline/filters.tsx`)

**ユーザーストーリー**: US-013-1, US-074

**受け入れ基準**:
- ペットで絞り込める
- 活動タイプ（日記、トイレ、餌など）で絞り込める
- 日記の場合は、シーン、感情、時間帯、場所で絞り込める
- フィルターをリセットできる
- 適用ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **検索性**: 目的の記録を素早く見つけられる
- **効率性**: フィルターで素早く絞り込める

**デザイン要件**:
- モーダルまたはシート形式
- フィルターオプションは大きく、タップしやすい
- 選択状態が視覚的に分かる（チェックマーク、色分け）
- リセットボタンは控えめに表示
- 適用ボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/timeline-filters.pen`

---

### ショップ機能

#### 19. ショップ一覧 (`app/shop/index.tsx`)

**ユーザーストーリー**: US-085

**受け入れ基準**:
- 利用可能なアイテムが一覧表示される
- アイテムの種類別にカテゴリ分けされる
- 各アイテムにポイント価格、現金価格、交換済みかどうかが表示される
- フィルター機能（ポイント購入可能、現金購入可能、期間限定）がある
- ソート機能（ポイント価格順、現金価格順、新着順）がある
- アイテムをタップすると詳細画面に遷移する

**体験価値**:
- **発見**: 欲しいアイテムを素早く見つけられる
- **選択**: ポイント購入と現金購入を比較できる

**デザイン要件**:
- グリッドまたはリストレイアウト
- アイテムカードは大きく、情報が読みやすい
- ポイント価格と現金価格は明確に表示
- 交換済みアイテムは視覚的に分かる（グレーアウト、バッジ）
- フィルターとソートは上部に配置

**デザインファイル**: `designs/screens/shop-list.pen`

---

#### 20. アイテム詳細 (`app/shop/[id].tsx`)

**ユーザーストーリー**: US-087, US-070

**受け入れ基準**:
- アイテム名、画像、説明、価格、種類が表示される
- 期間限定アイテムの場合、利用可能期間が表示される
- 所有しているアイテムの場合、「所有済み」と表示され、「使用する」ボタンが表示される
- 所有していないアイテムの場合、「ポイントで交換」または「現金で購入」ボタンが表示される
- アイテムのプレビューが表示される

**体験価値**:
- **確認**: アイテムの詳細を確認できる
- **選択**: ポイント購入と現金購入を選択できる

**デザイン要件**:
- アイテム画像は大きく、上部に配置
- 価格情報は大きく、目立つ位置に表示
- 購入ボタンは大きく、目立つ色（ブランドカラー）を使用
- プレビューは下部に配置
- 所有済みアイテムは特別なデザインで表示

**デザインファイル**: `designs/screens/shop-item-detail.pen`

---

#### 21. 所有アイテム一覧 (`app/shop/my-items.tsx`)

**ユーザーストーリー**: US-086

**受け入れ基準**:
- 交換済みアイテムが一覧表示される
- 各アイテムにアイテム名、画像、交換日時、交換方法が表示される
- アイテムをタップすると詳細画面に遷移する
- アイテムを直接使用できる（フレームを選択してペットの写真に適用など）

**体験価値**:
- **確認**: 所有しているアイテムを確認できる
- **使用**: アイテムを直接使用できる

**デザイン要件**:
- グリッドまたはリストレイアウト
- アイテムカードは大きく、情報が読みやすい
- 交換日時と交換方法は控えめに表示
- 使用ボタンは各アイテムカードに配置

**デザインファイル**: `designs/screens/my-items.pen`

---

### ポイント管理

#### 22. 所持ポイント確認 (`app/points/index.tsx`)

**ユーザーストーリー**: US-083

**受け入れ基準**:
- 現在の所持ポイントが大きく表示される
- ポイント数が視覚的に分かりやすく表示される（例: 1,234pt）
- ポイントの増減がリアルタイムで反映される
- ポイント獲得履歴へのリンクが表示される（US-088の履歴画面へ）

**体験価値**:
- **透明性**: 自分のポイント残高が明確に分かる
- **達成感**: ポイントが貯まっていく様子を確認できる

**デザイン要件**:
- ポイント数は非常に大きく、中央に配置
- ポイント獲得履歴へのリンクは下部に配置
- アニメーションでポイントの増減を視覚的に表示

**デザインファイル**: `designs/screens/points.pen`

---

#### 23. ポイント取得方法 (`app/points/methods.tsx`)

**ユーザーストーリー**: US-084

**受け入れ基準**:
- ポイント取得方法の一覧が表示される
- 各取得方法のポイント数と説明が明記される
- 各取得方法から直接記録画面に遷移できる
- 1日の最大獲得ポイント（30pt）が明示される

**体験価値**:
- **透明性**: ポイント取得方法が明確に分かる
- **効率性**: 各取得方法から直接記録画面に遷移できる

**デザイン要件**:
- カード型レイアウト
- 各取得方法は大きく、情報が読みやすい
- ポイント数は大きく、目立つ位置に表示
- 記録画面への遷移ボタンは各カードに配置
- 1日の最大獲得ポイントは上部に大きく表示

**デザインファイル**: `designs/screens/points-methods.pen`

---

#### 24. ポイント取得履歴 (`app/points/history.tsx`)

**ユーザーストーリー**: US-088

**受け入れ基準**:
- ポイント取得履歴が時系列順に表示される
- 各履歴に獲得/消費日時、ポイント数、理由、関連する活動ログやアイテムへのリンクが表示される
- フィルター機能（獲得のみ、消費のみ、期間でフィルター）がある
- ソート機能（新しい順、古い順、ポイント数順）がある
- ページネーション機能（履歴が多い場合）がある
- 合計獲得ポイントと合計消費ポイントが表示される

**体験価値**:
- **透明性**: ポイントの取得・消費履歴が明確に分かる
- **振り返り**: 過去のポイント取得を振り返れる

**デザイン要件**:
- リストレイアウト
- 各履歴カードは大きく、情報が読みやすい
- 獲得ポイントは緑色、消費ポイントは赤色で表示
- フィルターとソートは上部に配置
- 合計ポイントは上部に大きく表示

**デザインファイル**: `designs/screens/points-history.pen`

---

### 動画管理 ✅ **2026年追加 - Cloudflare R2移行**

#### 32. 動画アップロード (`app/pets/[id]/activities/[type].tsx`)

**ユーザーストーリー**: US-092

**受け入れ基準**:
- カメラロールから動画を選択できる、またはカメラで動画を撮影できる
- アップロード時に自動で圧縮される（HEVC形式、720p/30fps）
  - 無料ユーザー: 最大15秒、720p/HEVC（約15-20MB/分）
  - プレミアムユーザー: 最大60秒、1080p/HEVC（約30-40MB/分）
- サムネイル生成: 動画の最初のフレームから自動でサムネイル画像が生成される
- アップロード進捗: アップロードの進捗が表示される
- エラーハンドリング: アップロード失敗時は再試行できる

**体験価値**:
- **思い出の記録**: ペットの動きや表情を動画で記録できる
- **自動圧縮**: ユーザーが意識せずに最適なサイズで保存される

**デザイン要件**:
- 動画選択ボタンは大きく、分かりやすい
- 動画の長さ制限（無料: 15秒、プレミアム: 60秒）が視覚的に分かる
- 自動圧縮の進捗が表示される
- サムネイルが自動で生成され、プレビューとして表示される
- アップロード進捗バーが表示される

**デザインファイル**: `designs/screens/video-upload.pen`

---

#### 33. 動画再生 (`app/timeline/[id].tsx`, `app/albums/[id].tsx`)

**ユーザーストーリー**: US-093

**受け入れ基準**:
- 動画をタップすると再生される
- 再生コントロール（再生・一時停止・シークバー）が操作できる
- 全画面再生モードで再生できる
- サムネイル表示: 動画のサムネイルが表示される
- 読み込み状態: 動画の読み込み中はローディング表示される
- オフライン対応: オフライン時はキャッシュされた動画を再生できる（オプション）

**体験価値**:
- **振り返り**: ペットの動きや表情を動画で振り返れる
- **スムーズな再生**: Cloudflare CDNにより高速な動画配信

**デザイン要件**:
- 動画のサムネイルは大きく、タップしやすい
- 再生ボタンはサムネイルの中央に配置
- 全画面再生時は再生コントロールが表示される
- 読み込み中はローディングアニメーションが表示される

**デザインファイル**: `designs/screens/video-player.pen`

---

#### 34. 動画の制限と案内 (`app/pets/[id]/activities/[type].tsx`)

**ユーザーストーリー**: US-094

**受け入れ基準**:
- 動画の長さ制限: 無料ユーザーは1本あたり最大15秒まで
- 動画の本数制限: 無料ユーザーは1ペットにつき月間3本まで
- 制限到達時の案内: 制限に達した場合、「プレミアムなら60秒まで、無制限にアップロードできます」という案内が表示される
- プレミアム機能の説明: プレミアム機能の価値を分かりやすく説明

**体験価値**:
- **価値の理解**: プレミアム機能の価値を理解できる
- **選択の自由**: 無料でも動画を楽しめるが、プレミアムでより楽しめる

**デザイン要件**:
- 制限到達時の案内は控えめに、しかし明確に表示
- プレミアム機能の説明は分かりやすく、視覚的に表示
- アップグレードボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/video-limit-info.pen`

---

#### 35. 動画ダウンロード (`app/timeline/[id].tsx`, `app/albums/[id].tsx`)

**ユーザーストーリー**: US-095

**受け入れ基準**:
- 動画ダウンロード: プレミアムユーザーは動画をダウンロードできる
- ダウンロード形式: アップロード時の形式（HEVC）でダウンロードされる
- ダウンロード進捗: ダウンロードの進捗が表示される
- 無料ユーザー: 無料ユーザーはダウンロードできない（プレミアム案内が表示される）

**体験価値**:
- **思い出の保存**: 大切な動画をデバイスに保存できる安心感
- **データの所有**: 自分のデータを自由に持ち出せる

**デザイン要件**:
- ダウンロードボタンは控えめに表示（プレミアムユーザーのみ）
- ダウンロード進捗バーが表示される
- 無料ユーザーにはプレミアム案内が表示される

**デザインファイル**: `designs/screens/video-download.pen`

---

### コラム・記事

#### 25. コラム詳細 (`app/articles/[id].tsx`)

**ユーザーストーリー**: US-027

**受け入れ基準**:
- コラムのタイトル、本文、公開日が表示される
- サムネイル画像が表示される
- 一次ソースへのリンクが表示される
- 関連コラムが表示される
- AI相談への導線が表示される

**体験価値**:
- **信頼性**: 一次ソースへのリンクにより、信頼できる情報が得られる
- **学習**: ペットの健康管理について学べる

**デザイン要件**:
- 読みやすいレイアウト（マガジン形式）
- サムネイル画像は大きく、上部に配置
- 本文は読みやすいフォントサイズと行間
- 一次ソースへのリンクは明確に表示
- AI相談への導線は下部に固定

**デザインファイル**: `designs/screens/article-detail.pen`

---

#### 26. コラム検索 (`app/articles/search.tsx`)

**ユーザーストーリー**: US-029

**受け入れ基準**:
- 検索バーが表示される
- 検索結果が一覧表示される
- 検索履歴が表示される
- おすすめ検索キーワードが表示される

**体験価値**:
- **検索性**: 目的のコラムを素早く見つけられる
- **発見**: おすすめ検索キーワードから新しいコラムを発見できる

**デザイン要件**:
- 検索バーは上部に固定
- 検索結果はリスト形式で表示
- 検索履歴は控えめに表示
- おすすめ検索キーワードはタグ形式で表示

**デザインファイル**: `designs/screens/article-search.pen`

---

### AI相談

#### 27. AI相談開始 (`app/ai-chat/index.tsx`)

**ユーザーストーリー**: US-020

**受け入れ基準**:
- ペットを選択できる
- 相談内容を入力できる
- 免責事項が表示される
- 相談開始ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **安心感**: 免責事項により、安心して相談できる
- **簡単さ**: 素早く相談を開始できる

**デザイン要件**:
- シンプルで分かりやすいレイアウト
- ペット選択は大きく、視覚的に表示
- 相談内容入力は大きく、分かりやすい
- 免責事項は明確に表示（警告アイコン、色分け）
- 相談開始ボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/ai-chat-start.pen`

---

#### 28. AIチャット画面 (`app/ai-chat/[threadId].tsx`)

**ユーザーストーリー**: US-021, US-022, US-023, US-024, US-025

**受け入れ基準**:
- チャット履歴が表示される（US-024）
- メッセージを入力できる
- AIの回答が表示される
- 引用元が表示される（US-022）
- 緊急度が判定され、警告が表示される（US-023）
- 推奨アクションが表示される（US-025）
- ペットのカルテ情報が活用される（US-021）

**体験価値**:
- **信頼性**: 引用元により、信頼できる情報が得られる
- **安心感**: 緊急度判定により、適切な対応ができる

**デザイン要件**:
- チャット形式のレイアウト
- ユーザーメッセージとAIメッセージは視覚的に区別
- 引用元は控えめに表示（リンク形式）
- 緊急度警告は大きく、警告色（赤、オレンジ）で表示
- 推奨アクションはカード形式で表示
- メッセージ入力欄は下部に固定

**デザインファイル**: `designs/screens/ai-chat.pen`

---

### リマインダー管理

#### 29. リマインダー一覧 (`app/reminders/index.tsx`)

**ユーザーストーリー**: US-015

**受け入れ基準**:
- 設定済みのリマインダーが一覧表示される
- 各リマインダーにカテゴリ、時刻、頻度が表示される
- リマインダーを完了できる
- リマインダーを編集・削除できる
- 新規リマインダー作成ボタンが表示される

**体験価値**:
- **効率性**: リマインダーを素早く確認・完了できる
- **管理**: リマインダーを簡単に管理できる

**デザイン要件**:
- リストレイアウト
- 各リマインダーカードは大きく、情報が読みやすい
- 完了ボタンは大きく、目立つ位置に配置
- 編集・削除ボタンは控えめに表示
- 新規リマインダー作成ボタンは固定位置（FABまたは固定ボタン）に配置

**デザインファイル**: `designs/screens/reminders-list.pen`

---

#### 30. リマインダー作成・編集 (`app/reminders/create.tsx`, `app/reminders/[id].tsx`)

**ユーザーストーリー**: US-014

**受け入れ基準**:
- カテゴリ（掃除対象）を選択できる
- 頻度（毎日、毎週、隔週、毎月など）を選択できる
- 時刻を設定できる
- 曜日を指定できる（毎週の場合）
- 保存ボタンが大きく、わかりやすい位置にある

**体験価値**:
- **柔軟性**: 様々な頻度でリマインダーを設定できる
- **簡単さ**: プリセットから素早く設定できる

**デザイン要件**:
- シンプルで分かりやすいフォームレイアウト
- カテゴリ選択は大きく、視覚的に表示（アイコン付き）
- 頻度選択は大きく、タップしやすい
- 時刻設定は大きく、分かりやすい
- 保存ボタンは目立つ色（ブランドカラー）を使用

**デザインファイル**: `designs/screens/reminder-create.pen`

---

### 設定

#### 31. プレミアム管理 (`app/settings/premium.tsx`)

**ユーザーストーリー**: US-019, US-019-1, US-019-2, US-019-3, US-019-4, US-055

**受け入れ基準**:
- 現在のプランが表示される
- プレミアム機能の一覧が表示される
- アップグレードボタンが表示される
- 解除理由の収集フォームが表示される（US-055）
- 猶予期間の状況が表示される（US-019-4）

**体験価値**:
- **透明性**: プレミアム機能が明確に分かる
- **選択**: アップグレードを選択できる

**デザイン要件**:
- 現在のプランは大きく、目立つ位置に表示
- プレミアム機能はカード形式で表示
- アップグレードボタンは大きく、目立つ色（ブランドカラー）を使用
- 解除理由フォームは控えめに表示
- 猶予期間の状況は警告色（オレンジ）で表示

**デザインファイル**: `designs/screens/premium-settings.pen`

---

#### 32. メモリアルモード (`app/settings/memorial.tsx`)

**ユーザーストーリー**: US-057, US-059, US-067

**受け入れ基準**:
- メモリアルモードへの移行ができる（US-057）
- メモリアルモードでの振り返りができる（US-059）
- 追悼（メモリアル）プランの説明が表示される（US-067）
- 非常にセンシティブな項目であることが配慮される

**体験価値**:
- **思い出の保護**: ペットの思い出を大切にできる
- **安心感**: 経済的な負担を感じることなく思い出を大切にできる

**デザイン要件**:
- 非常に優しく、温かみのあるデザイン
- メモリアルモードへの移行は慎重に（確認ダイアログ）
- 振り返りは優しい色合いで表示
- 追悼プランの説明は明確に、優しく表示

**デザインファイル**: `designs/screens/memorial-settings.pen`

---

## デザインシステム

### カラーパレット

**ブランドカラー**:
- プライマリ: 温かみのあるオレンジ系（#FF8C42）
- セカンダリ: 優しいグリーン系（#7FB069）
- アクセント: 明るいイエロー系（#FFD23F）

**機能色**:
- 成功: グリーン（#7FB069）
- 警告: オレンジ（#FF8C42）
- エラー: レッド（#E63946）
- 情報: ブルー（#457B9D）

**ニュートラル**:
- 背景: 白（#FFFFFF）、ライトグレー（#F5F5F5）
- テキスト: ダークグレー（#2B2B2B）、ミディアムグレー（#6B6B6B）

**デザインファイル**: `designs/design-system/colors.pen`

---

### タイポグラフィ

**フォントファミリー**:
- 日本語: システムフォント（SF Pro、Noto Sans JP）
- 英語: システムフォント（SF Pro）

**フォントサイズ**:
- 見出し1: 32px（太字）
- 見出し2: 24px（太字）
- 見出し3: 20px（太字）
- 本文: 16px（通常）
- キャプション: 14px（通常）

**デザインファイル**: `designs/design-system/typography.pen`

---

### スペーシング

**基準単位**: 8px

**スペーシングスケール**:
- xs: 4px
- sm: 8px
- md: 16px
- lg: 24px
- xl: 32px
- 2xl: 48px

**デザインファイル**: `designs/design-system/spacing.pen`

---

### コンポーネントライブラリ

**共通コンポーネント**:
- Button（プライマリ、セカンダリ、アウトライン）
- Input（テキスト、数値、日付）
- Card（基本、エレベーション付き）
- Badge（ステータス、通知）
- Modal（基本、フルスクリーン）
- Sheet（ボトムシート）

**デザインファイル**: `designs/design-system/components.pen`

---

## デザインファイルの命名規則

### 画面デザイン
- `designs/screens/{screen-name}.pen`
- 例: `designs/screens/home.pen`, `designs/screens/pet-register.pen`

### コンポーネントデザイン
- `designs/components/{component-name}.pen`
- 例: `designs/components/pet-card.pen`, `designs/components/activity-form.pen`

### デザインシステム
- `designs/design-system/{category}.pen`
- 例: `designs/design-system/colors.pen`, `designs/design-system/typography.pen`

### フロー
- `designs/flows/{flow-name}-flow.pen`
- 例: `designs/flows/pet-registration-flow.pen`, `designs/flows/ai-consultation-flow.pen`

---

## Pencilでのデザイン作成手順

### 1. 画面デザインの作成

1. **ユーザーストーリーの確認**: このドキュメントから該当する画面のセクションを確認
2. **デザインファイルの作成**: `designs/screens/{screen-name}.pen`を作成
3. **レイアウトの設計**: ユーザーストーリーの受け入れ基準に基づいてレイアウトを設計
4. **コンポーネントの配置**: Tamaguiコンポーネントを配置
5. **インタラクションの設計**: タップ、スワイプなどのインタラクションを設計
6. **デザインのレビュー**: ユーザーストーリーの体験価値を満たしているか確認

### 2. コンポーネントデザインの作成

1. **コンポーネントの特定**: 再利用可能なコンポーネントを特定
2. **デザインファイルの作成**: `designs/components/{component-name}.pen`を作成
3. **コンポーネントの設計**: デザインシステムに基づいてコンポーネントを設計
4. **バリエーションの設計**: 様々な状態（通常、ホバー、アクティブ、無効など）を設計
5. **デザインのレビュー**: 一貫性と使いやすさを確認

### 3. デザインシステムの作成

1. **カラーパレットの定義**: `designs/design-system/colors.pen`を作成
2. **タイポグラフィの定義**: `designs/design-system/typography.pen`を作成
3. **スペーシングの定義**: `designs/design-system/spacing.pen`を作成
4. **コンポーネントライブラリの作成**: `designs/design-system/components.pen`を作成

---

## デザインからコードへの変換

### 1. Pencilでのコード生成

1. **デザインの確定**: デザインが確定したら、Pencilの「Export to Code」機能を使用
2. **コードの生成**: HTML/CSS/Reactコードを生成
3. **コードの確認**: 生成されたコードを確認

### 2. Tamaguiコンポーネントへの変換

1. **コンポーネントの配置**: 生成されたコードを`packages/ui/src/components/`に配置
2. **Tamaguiへの変換**: Tamaguiコンポーネントに変換（必要に応じて手動調整）
3. **型定義の追加**: TypeScriptの型定義を追加
4. **エクスポート**: `packages/ui/src/index.ts`からエクスポート

### 3. アプリでの使用

1. **インポート**: `@repo/ui`からコンポーネントをインポート
2. **使用**: `apps/expo`と`apps/admin`で使用
3. **テスト**: 実際のデバイスで動作確認

---

## 参考資料

### デザインガイドライン

- **温かみのあるデザイン**: 柔らかい色、丸みのある角、優しいグラデーション
- **アクセシビリティ**: 十分なコントラスト比、タップ領域の最小サイズ、読みやすいフォントサイズ
- **一貫性**: Tamaguiコンポーネントを使用、統一されたスペーシングシステム、統一されたカラーパレット

### 関連ドキュメント

- [USER_STORIES.md](../stories/USER_STORIES.md): 各ストーリーの詳細な受け入れ基準と体験価値
- [DESIGN_DOCUMENT.md](./DESIGN_DOCUMENT.md): 画面設計の詳細とUXフロー
- [APP_DIRECTORY_STRUCTURE.md](../app-structure/APP_DIRECTORY_STRUCTURE.md): アプリディレクトリ構成と画面マッピング
- [CLOUDFLARE_R2_MIGRATION.md](./CLOUDFLARE_R2_MIGRATION.md): Cloudflare R2移行設計（画像・動画保存） ✅ **2026年追加**
- [IMAGE_STORAGE_STRATEGY.md](./IMAGE_STORAGE_STRATEGY.md): 画像・動画保存戦略 ✅ **2026年更新**
- [.cursor/PENCIL_SETUP.md](./.cursor/PENCIL_SETUP.md): Pencil.devセットアップガイド

---

**作成日**: 2026年2月1日  
**最終更新**: 2026年2月1日
