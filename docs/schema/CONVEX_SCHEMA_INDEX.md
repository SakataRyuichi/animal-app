# Convex Schema ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹

**ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**: [DOCUMENTATION_INDEX.md](../../DOCUMENTATION_INDEX.md)

## æ¦‚è¦
ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Convexã‚¹ã‚­ãƒ¼ãƒã®å®šç¾©ã¨èª¬æ˜ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã™ã€‚
Phase 1ã‹ã‚‰Phase 3ã¾ã§ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆã«ãªã£ã¦ã„ã¾ã™ã€‚

**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**:
- [USER_STORIES.md](../stories/USER_STORIES.md): ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼
- [ADMIN_USER_STORIES.md](../stories/ADMIN_USER_STORIES.md): ç®¡ç†ç”»é¢ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼
- [WEB_USER_STORIES.md](../stories/WEB_USER_STORIES.md): å…¬å¼ã‚µã‚¤ãƒˆã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ âœ… **2026å¹´è¿½åŠ **
- [DESIGN_DOCUMENT.md](../design/DESIGN_DOCUMENT.md): ã‚¢ãƒ—ãƒªè¨­è¨ˆã®è©³ç´°
- [IMAGE_STORAGE_STRATEGY.md](../design/IMAGE_STORAGE_STRATEGY.md): ç”»åƒä¿å­˜æˆ¦ç•¥
- [AI_CHAT_REVIEW.md](../design/AI_CHAT_REVIEW.md): AIãƒãƒ£ãƒƒãƒˆæ©Ÿèƒ½ã®ãƒ¬ãƒ“ãƒ¥ãƒ¼
- [SCHEMA_REVIEW.md](../requirements/SCHEMA_REVIEW.md): ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆã®ãƒ¬ãƒ“ãƒ¥ãƒ¼

**é‡è¦**: ã“ã®ã‚¹ã‚­ãƒ¼ãƒã§ã¯ã€Convexã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŒ‡å‘ãªç‰¹æ€§ã‚’æœ€å¤§é™ã«æ´»ã‹ã—ãŸ`deletion`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½¿ç”¨ã—ãŸè«–ç†å‰Šé™¤æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚è©³ç´°ã¯ã€Œè¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ > 6. å®‰å…¨ãªå‰Šé™¤æ©Ÿèƒ½ï¼ˆè«–ç†å‰Šé™¤ï¼‰ã€ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ã‚¹ã‚­ãƒ¼ãƒå®šç¾©

å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®šç¾©ã‚’å«ã‚€ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ï¼š
- [00-schema-definition.md](./convex-schema/00-schema-definition.md): å…¨ãƒ†ãƒ¼ãƒ–ãƒ«ã®TypeScriptå®šç¾©

---

## ãƒ†ãƒ¼ãƒ–ãƒ«è©³ç´°èª¬æ˜

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»èªè¨¼é–¢é€£
- [01-users.md](./convex-schema/01-users.md): 1. usersï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ï¼‰

### ãƒšãƒƒãƒˆç®¡ç†
- [02-pets.md](./convex-schema/02-pets.md): 2. petsï¼ˆãƒšãƒƒãƒˆï¼‰
- [03-pet-members.md](./convex-schema/03-pet-members.md): 3. pet_membersï¼ˆå…±åŒç®¡ç†è€…ï¼‰

### æ´»å‹•ãƒ­ã‚°ãƒ»è¨˜éŒ²
- [06-activities.md](./convex-schema/06-activities.md): 6. activitiesï¼ˆæ´»å‹•ãƒ­ã‚°ï¼‰

### ãƒ¡ãƒ‡ã‚£ã‚¢ç®¡ç†
- [05-images.md](./convex-schema/05-images.md): 5. imagesï¼ˆç”»åƒãƒ»å‹•ç”»ç®¡ç†ï¼‰âœ… **Convexã®ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆãƒ»Cloudflare R2ç§»è¡Œ**

### å•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- [07-products.md](./convex-schema/07-products.md): 7. productsï¼ˆå•†å“ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼‰âœ… **2026å¹´æ›´æ–° - ã‚¢ã‚½ã‚·ã‚¨ã‚¤ãƒˆAPIæƒ…å ±ã®è¿½åŠ **
- [08-reviews.md](./convex-schema/08-reviews.md): 8. reviewsï¼ˆå•†å“ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼‰âœ… **2026å¹´æ›´æ–° - é¤Œã®ãƒ¬ãƒ“ãƒ¥ãƒ¼å°‚ç”¨ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®è¿½åŠ **

### SNSæ©Ÿèƒ½
- [09-follows.md](./convex-schema/09-follows.md): 9. followsï¼ˆãƒ•ã‚©ãƒ­ãƒ¼é–¢ä¿‚ï¼‰
- [10-likes.md](./convex-schema/10-likes.md): 10. likesï¼ˆã„ã„ã­ãƒ»ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼‰âœ… **2026å¹´æ›´æ–° - å¤šæ©Ÿèƒ½ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³**

### ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†
- [11-articles.md](./convex-schema/11-articles.md): 11. articlesï¼ˆã‚³ãƒ©ãƒ ãƒ»è¨˜äº‹ï¼‰
- [18-curations.md](./convex-schema/18-curations.md): 18. curationsï¼ˆç®¡ç†è€…å³é¸ã®ã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰âœ… **å¤–éƒ¨è¨˜äº‹ã®ç´¹ä»‹**
- [19-curation-interactions.md](./convex-schema/19-curation-interactions.md): 19. curation_interactionsï¼ˆã‚­ãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ï¼‰

### AIæ©Ÿèƒ½
- [12-chat-threads.md](./convex-schema/12-chat-threads.md): 12. chat_threadsï¼ˆAIãƒãƒ£ãƒƒãƒˆã‚¹ãƒ¬ãƒƒãƒ‰ï¼‰
- [13-chat-messages.md](./convex-schema/13-chat-messages.md): 13. chat_messagesï¼ˆAIãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼‰
- [25-knowledge-base.md](./convex-schema/25-knowledge-base.md): 25. knowledge_baseï¼ˆçŸ¥è­˜ãƒ™ãƒ¼ã‚¹ï¼‰

### ã‚¢ãƒ«ãƒãƒ ç®¡ç†
- [14-albums.md](./convex-schema/14-albums.md): 14. albumsï¼ˆã‚¢ãƒ«ãƒãƒ ï¼‰
- [15-album-items.md](./convex-schema/15-album-items.md): 15. album_itemsï¼ˆã‚¢ãƒ«ãƒãƒ ã‚¢ã‚¤ãƒ†ãƒ ï¼‰

### ãƒ—ãƒ¬ãƒŸã‚¢ãƒ ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
- [16-premium-cancellation-reasons.md](./convex-schema/16-premium-cancellation-reasons.md): 16. premium_cancellation_reasonsï¼ˆãƒ—ãƒ¬ãƒŸã‚¢ãƒ è§£é™¤ç†ç”±ï¼‰
- [17-account-deletion-reasons.md](./convex-schema/17-account-deletion-reasons.md): 17. account_deletion_reasonsï¼ˆé€€ä¼šç†ç”±ï¼‰

### ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
- [20-toilet-condition-masters.md](./convex-schema/20-toilet-condition-masters.md): 20. toilet_condition_mastersï¼ˆãƒˆã‚¤ãƒ¬è¨˜éŒ²ç”¨ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - ç¨®åˆ¥ã”ã¨ã®é¸æŠè‚¢**
- [21-cleaning-action-masters.md](./convex-schema/21-cleaning-action-masters.md): 21. cleaning_action_mastersï¼ˆæ¸…æƒã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - å…¨ç¨®å…±é€š**
- [22-reminder-category-masters.md](./convex-schema/22-reminder-category-masters.md): 22. reminder_category_mastersï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ã‚«ãƒ†ã‚´ãƒªãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - ç¨®åˆ¥ã”ã¨ã®ãƒ—ãƒªã‚»ãƒƒãƒˆ**
- [31-diary-scenes.md](./convex-schema/31-diary-scenes.md): 31. diary_scenesï¼ˆæ—¥è¨˜ã‚·ãƒ¼ãƒ³ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - æ—¥è¨˜ã®ç°¡å˜è¨˜éŒ²**
- [32-diary-emotions.md](./convex-schema/32-diary-emotions.md): 32. diary_emotionsï¼ˆæ—¥è¨˜æ„Ÿæƒ…ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - æ—¥è¨˜ã®ç°¡å˜è¨˜éŒ²**
- [33-reaction-types.md](./convex-schema/33-reaction-types.md): 33. reaction_typesï¼ˆãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ—ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - å¤šæ©Ÿèƒ½ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³**
- [34-context-stamps.md](./convex-schema/34-context-stamps.md): 34. context_stampsï¼ˆã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¿ãƒ³ãƒ—ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼‰âœ… **2026å¹´è¿½åŠ  - ã‚·ãƒ¼ãƒ³+æ„Ÿæƒ…ã®ã‚»ãƒƒãƒˆ**

### ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼æ©Ÿèƒ½
- [23-reminders.md](./convex-schema/23-reminders.md): 23. remindersï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼è¨­å®šï¼‰âœ… **2026å¹´è¿½åŠ  - æƒé™¤ã®ã‚¿ã‚¤ãƒãƒ¼ãƒ»ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼**
- [24-reminder-logs.md](./convex-schema/24-reminder-logs.md): 24. reminder_logsï¼ˆãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼å®Œäº†å±¥æ­´ï¼‰âœ… **2026å¹´è¿½åŠ  - å®Œäº†è¨˜éŒ²ã¨ãƒã‚¤ãƒ³ãƒˆä»˜ä¸**

### ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- [26-assets.md](./convex-schema/26-assets.md): 26. assetsï¼ˆã‚·ãƒ§ãƒƒãƒ—ã‚¢ã‚¤ãƒ†ãƒ ï¼‰âœ… **ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ï¼ˆ2026å¹´è¿½åŠ ï¼‰**
- [27-badge-definitions.md](./convex-schema/27-badge-definitions.md): 27. badge_definitionsï¼ˆãƒãƒƒã‚¸å®šç¾©ï¼‰âœ… **ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ï¼ˆ2026å¹´è¿½åŠ ï¼‰**
- [28-point-history.md](./convex-schema/28-point-history.md): 28. point_historyï¼ˆãƒã‚¤ãƒ³ãƒˆç²å¾—å±¥æ­´ï¼‰âœ… **ã‚²ãƒ¼ãƒŸãƒ•ã‚£ã‚±ãƒ¼ã‚·ãƒ§ãƒ³è¦ç´ ï¼ˆ2026å¹´è¿½åŠ ï¼‰**

### å…¬å¼ã‚µã‚¤ãƒˆãƒ»æ³•å‹™
- [29-news.md](./convex-schema/29-news.md): 29. newsï¼ˆãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ»æ›´æ–°æƒ…å ±ï¼‰âœ… **2026å¹´è¿½åŠ  - å…¬å¼ã‚µã‚¤ãƒˆ**
- [35-legal-documents.md](./convex-schema/35-legal-documents.md): 35. legal_documentsï¼ˆæ³•å‹™ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰âœ… **2026å¹´è¿½åŠ  - å…¬å¼ã‚µã‚¤ãƒˆ**

---

## è¨­è¨ˆã®ãƒã‚¤ãƒ³ãƒˆ

è©³ç´°ã¯å„ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚ä¸»è¦ãªè¨­è¨ˆãƒã‚¤ãƒ³ãƒˆï¼š

1. **æŸ”è»Ÿæ€§ã®ç¢ºä¿**: `payload`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã‚Šã€ãƒ­ã‚°ã‚¿ã‚¤ãƒ—ã”ã¨ã«ç•°ãªã‚‹ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’æŸ”è»Ÿã«æ‰±ãˆã‚‹
2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–**: ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¨æ¤œç´¢ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’é©åˆ‡ã«è¨­å®š
3. **æ‹¡å¼µæ€§ã®ç¢ºä¿**: Phase 1ã‹ã‚‰Phase 3ã¾ã§ã‚’è¦‹æ®ãˆãŸè¨­è¨ˆ
4. **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: èªè¨¼ãƒ»èªå¯ã®å®Ÿè£…
5. **å®‰å…¨ãªå‰Šé™¤æ©Ÿèƒ½ï¼ˆè«–ç†å‰Šé™¤ï¼‰**: Convexã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæŒ‡å‘ãªç‰¹æ€§ã‚’æœ€å¤§é™ã«æ´»ç”¨
6. **ç”»åƒä¿å­˜æˆ¦ç•¥**: Convexã®ãƒ—ãƒ©ã‚¤ã‚·ãƒ³ã‚°ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ
7. **ãƒ‡ãƒ¼ã‚¿ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã¨ç‰©ç†å‰Šé™¤ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: Convex Cronã‚¸ãƒ§ãƒ–ã«ã‚ˆã‚‹è‡ªå‹•ç‰©ç†å‰Šé™¤
8. **ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã‚¨ã‚¯ã‚¹ãƒšãƒªã‚¨ãƒ³ã‚¹**: ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚­ãƒ¥ãƒ¼ç®¡ç†

---

## å®Ÿè£…ä¾‹

å„ãƒ†ãƒ¼ãƒ–ãƒ«ã®å®Ÿè£…ä¾‹ã¯ã€å„ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚
