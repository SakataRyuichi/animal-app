# ユーザーストーリー インデックス

**📚 ドキュメントインデックス**: [DOCUMENTATION_INDEX.md](../../DOCUMENTATION_INDEX.md)

## 概要
このドキュメントは、**モバイルアプリ（React Native Expo）**の機能をユーザー視点で整理したユーザーストーリーのインデックスです。

**管理画面（Next.js）のストーリーは[ADMIN_USER_STORIES.md](./ADMIN_USER_STORIES.md)を参照してください。**

**関連ドキュメント**:
- [CONVEX_SCHEMA.md](../schema/CONVEX_SCHEMA.md): スキーマ定義と実装例
- [DESIGN_DOCUMENT.md](../design/DESIGN_DOCUMENT.md): アプリ設計の詳細
- [PREMIUM_FEATURES.md](../design/PREMIUM_FEATURES.md): プレミアム機能の定義
- [APP_DIRECTORY_STRUCTURE.md](../app-structure/APP_DIRECTORY_STRUCTURE.md): アプリディレクトリ構成と画面マッピング ✅ **2026年追加**

各ストーリーは「As a / I want to / So that」の形式で記述され、ユーザーの感情や体験価値を明確にしています。

**このドキュメントは「開発の憲法」として機能します。**
CursorなどのAI開発ツールに機能の実装を依頼する際、このドキュメントを参照することで、単なる「データ入力フォーム」ではなく、ユーザーの体験価値が込められた「価値ある機能」を作り出すことができます。

### AI（Cursor）への指示への活用

このドキュメントをCursorで活用する際は、以下のように指示してください：

**例1: 基本的な実装依頼**
```
ユーザーストーリードキュメントの US-009（トイレ記録）を実装して。
特に『受け入れ基準』にある視覚的なアイコン選択と、異常時のAI相談への導線を忘れずに。
『体験価値』にある『専門知識がなくても記録できる』UIを重視して作成して。
```

**例2: キラー機能とフック機能の連動**
```
US-027（コラム詳細表示）を実装して。
特に、コラムの末尾にそのトピックに関連したAIへの質問ボタンを追加して。
コラムを読んで「あ、うちの子もこれに当てはまるかも？」と気づいた時、
すぐにAI相談に繋げられるようにして。
```

**例3: 体験価値を重視した実装**
```
US-042（いいね機能）を実装して。
特に、専門家（獣医師など）が「いいね」した投稿には特別なバッジを表示して。
『体験価値』にある『信頼できる情報を発見できる』を実現するUIを重視して。
```

**例4: センシティブな項目の実装**
```
US-057（虹の橋を渡る）を実装して。
非常にセンシティブな項目なので、温かみのある表現とUIを重視して。
「削除」ではなく「虹の橋を渡る」という優しい表現を使用し、
「記録の封印」ではなく「思い出の保護」という観点で設計して。
```

このように指示することで、AIは単なる機能実装ではなく、ユーザーの体験価値を重視した実装を行います。

### ストーリーの構成
各ユーザーストーリーには以下の要素が含まれます：
- **As a**: ユーザーのペルソナ（誰が）
- **I want to**: ユーザーの行動（何をしたいか）
- **So that**: ユーザーの価値・感情（なぜそれが価値があるか）
- **受け入れ基準**: 機能の具体的な要件
- **体験価値**: ユーザーが得られる価値や感情
- **使用シーン**: 実際の使用場面の例
- **優先度**: 開発の優先順位

### フェーズ別の分類
- **Phase 1**: 個人管理・基礎構築（必須機能）
- **Phase 2**: 家族・チーム管理（高優先度）
- **Phase 3**: SNS・商品データベース（中〜高優先度）

### キラー機能・フック機能
- ✅ **キラー機能**: AI相談機能（US-020〜US-025）- アプリの差別化要因
- ✅ **フック機能**: コラム・記事機能（US-026〜US-029）- 毎日アプリを開く動機
  - **注意**: コラム投稿機能（US-030〜US-032）は管理画面側の機能です。`ADMIN_USER_STORIES.md`を参照してください。

**キラー機能とフック機能の連動**:
- **コラム（フック）**: 正しい知識を学び、「あ、うちの子もこれに当てはまるかも？」と気づかせる
- **AI相談（キラー）**: その気づきを即座に専門的なアドバイスへ繋げ、安心感を与える
- **連動の実現**: コラムの末尾に、そのトピックに関連したAIへの質問ボタンを配置（US-027）
  - 例：熱中症のコラムの最後に「うちの子の今の体調を相談する」ボタンを表示
  - これにより、コラムを読んで気づいたことを、すぐにAI相談に繋げられる

---

## ストーリー一覧

### Epic 1: 認証・ユーザー管理
- [01-authentication.md](./user-stories/01-authentication.md)
  - US-001: ユーザー登録
  - US-002: ログイン
  - US-003: プロフィール編集

### Epic 2: ペット管理
- [02-pet-management.md](./user-stories/02-pet-management.md)
  - US-004: ペット登録
  - US-005-1: ペットの年齢表示
  - US-005: ペット一覧表示
  - US-006: ペットプロフィール編集
  - US-007: ペット削除
  - US-007-1: ペット復元
  - US-005-2: ペットのバースデー演出
  - US-005-3: 成長の節目通知

### Epic 3: 活動ログ記録・リマインダー・広告表示 ✅ **2026年更新**
- [03-activity-logs.md](./user-stories/03-activity-logs.md)
  - US-008: 食事記録
  - US-008-1: 画像アップロード（活動ログ）
  - US-009: トイレ記録 ✅ **2026年更新 - 種別ごとの最適化された選択肢**
  - US-010: 散歩記録
  - US-011: 日記投稿 ✅ **2026年更新 - シーン・感情・タグによる簡単記録**
  - US-012: ケア記録
  - US-013: タイムライン表示
  - US-013-1: タイムラインビューの拡張機能（フィルター・リマインダー完了状況）✅ **2026年追加**
  - US-014: リマインダー設定 ✅ **2026年追加 - 掃除のタイマー・リマインダー**
  - US-015: リマインダー通知と完了 ✅ **2026年追加 - Push通知と完了記録**
  - US-018: 広告表示（無料ユーザー）✅ **2026年追加 - さりげない広告配置**
  - US-072: 統計情報表示
  - US-073: 日記のシーン・感情マスターデータ表示 ✅ **2026年追加**
  - US-074: 日記のフィルタリング（シーン・感情・時間帯・場所）✅ **2026年追加**
  - US-075: 多機能リアクション ✅ **2026年追加**
  - US-076: 日記の自動タグ付け（シーン連携）✅ **2026年追加**
  - US-077: 活動ログ編集
  - US-078: 活動ログ削除
  - US-078-1: 活動ログ復元
  - US-065: オフライン画像アップロード（キュー管理と再試行）✅ **2026年最終設計検証で追加**
  - US-066: 同時編集の競合解決（楽観的ロック）✅ **2026年最終設計検証で追加**

### Epic 4: ダッシュボード・統計
- [04-dashboard-statistics.md](./user-stories/04-dashboard-statistics.md)
  - US-016: 今日のサマリー表示
  - US-017: 体重推移グラフ
  - US-072: 統計情報表示

### Epic 5: プレミアム機能 ✅ **機能制限とUXをシームレスに繋ぐ設計**
- [05-premium.md](./user-stories/05-premium.md)
  - US-019: プレミアム会員登録
  - US-019-1: プレミアム限定機能へのアクセス制御
  - US-019-2: プレミアム限定画面へのアクセス制御
  - US-019-3: アップグレード案内の表示
  - US-019-4: 猶予期間（Grace Period）の管理
  - US-055: プレミアム解除理由の収集
  - US-056: 退会理由の収集
  - US-067: 追悼（メモリアル）プランの導入 ✅ **2026年最終設計検証で追加**

### Epic 6: コラム・記事機能（Phase 1後半 / Phase 2）✅ **信頼性向上・フック機能**
- [06-articles.md](./user-stories/06-articles.md)
  - US-026: コラム一覧表示
  - US-027: コラム詳細表示
  - US-028: レコメンドコラム表示
  - US-029: コラム検索
  - US-079: 管理者厳選のキュレーション一覧表示
  - US-080: キュレーション記事の閲覧
  - US-081: キュレーション記事の「あとで読む」機能
  - US-082: キュレーション記事をアルバムに保存
  - **注意**: コラム投稿機能（US-030〜US-032）は管理画面側の機能です。`ADMIN_USER_STORIES.md`を参照してください。

### Epic 7: AI相談機能（Phase 1後半 / Phase 2）✅ **キラー機能**
- [07-ai-chat.md](./user-stories/07-ai-chat.md)
  - US-020: AI相談の開始
  - US-021: ペットのカルテ情報を活用した相談
  - US-022: 信頼できる知識ベースからの回答
  - US-023: 緊急度の判定と病院案内
  - US-024: チャット履歴の表示
  - US-025: 推奨アクションの表示

### Epic 8: 共同管理（Phase 2）
- [08-collaboration.md](./user-stories/08-collaboration.md)
  - US-033: 共同管理者の追加
  - US-034: 共同管理者一覧表示
  - US-035: 権限の変更
  - US-036: 共同管理者の削除
  - US-037: 共有ペット一覧表示
  - US-038: 共有ペットへの記録

### Epic 9: SNS機能（Phase 3）✅ **2026年版モダンSNS・信頼性重視**
- [09-sns.md](./user-stories/09-sns.md)
  - US-039: フォロー中・おすすめタブ切り替え（最高）✅ **2026年版モダンSNS**
  - US-040: フォロー機能
  - US-041: グローバルフィード表示
  - US-042: いいね機能 ✅ **2026年更新 - 多機能リアクション**
  - US-043: 種別フィルター
  - US-075: 多機能リアクション ✅ **2026年追加 - いいね機能の拡張**

### Epic 10: 商品データベース（Phase 3）
- [10-products.md](./user-stories/10-products.md)
  - US-044: 商品検索 ✅ **2026年更新 - 体験をよくする検索機能**
  - US-045: 商品詳細表示 ✅ **2026年更新 - アソシエイトAPI情報の表示**
  - US-046: 商品登録（ユーザー投稿） ✅ **2026年更新 - アソシエイトAPI連携**
  - **注意**: 商品承認機能（US-047）は管理画面側の機能です。`ADMIN_USER_STORIES.md`のEpic ADM-3を参照してください。

### Epic 11: レビュー機能（Phase 3）
- [11-reviews.md](./user-stories/11-reviews.md)
  - US-048: レビュー投稿 ✅ **2026年更新 - 餌のレビューに特化した詳細情報**
  - US-049: レビュー一覧表示
  - US-050: 種別ごとの人気商品ランキング

### Epic 12: 画像・動画管理機能 ✅ **Convexのプライシングを考慮した設計・Cloudflare R2移行**
- [12-media.md](./user-stories/12-media.md)
  - US-051: 画像の最高画質表示
  - US-052: 画像ダウンロード
  - US-053: 画像編集（スタンプ・文字入れ）
  - US-054: 画像枚数制限の案内
  - US-092: 動画のアップロード ✅ **2026年追加 - Cloudflare R2移行**
  - US-093: 動画の再生 ✅ **2026年追加 - Cloudflare R2移行**
  - US-094: 動画の制限と案内 ✅ **2026年追加 - Cloudflare R2移行**
  - US-095: 動画のダウンロード ✅ **2026年追加 - Cloudflare R2移行**
  - US-065: オフライン画像アップロード（キュー管理と再試行）✅ **2026年最終設計検証で追加**
  - US-066: 同時編集の競合解決（楽観的ロック）✅ **2026年最終設計検証で追加**

### Epic 13: ユーザーフィードバック機能 ✅ **温かみのある離脱対応**
- [13-feedback.md](./user-stories/13-feedback.md)
  - US-055: プレミアム解除理由の収集
  - US-056: 退会理由の収集

### Epic 14: メモリアル機能 ✅ **非常にセンシティブな項目 - 思い出の保護**
- [14-memorial.md](./user-stories/14-memorial.md)
  - US-057: 虹の橋を渡る（メモリアルモードへの移行）
  - US-058: 思い出のアルバム作成・エクスポート
  - US-059: メモリアルモードでの振り返り
  - US-067: 追悼（メモリアル）プランの導入 ✅ **2026年最終設計検証で追加**

### Epic 15: アルバム管理機能 ✅ **思い出をテーマ別に整理**
- [15-albums.md](./user-stories/15-albums.md)
  - US-060: アルバム作成
  - US-061: アルバムに日記・写真を追加
  - US-062: アルバム一覧・詳細表示
  - US-063: アルバムの共有・送信（プレミアム限定）
  - US-064: アルバムの共同編集（プレミアム限定）

### Epic 16: 管理者厳選のキュレーション機能 ✅ **外部記事の紹介**
- [16-curation.md](./user-stories/16-curation.md)
  - US-079: 管理者厳選のキュレーション一覧表示（アプリ側）
  - US-080: キュレーション記事の閲覧（アプリ側）
  - US-081: キュレーション記事の「あとで読む」機能（アプリ側）
  - US-082: キュレーション記事をアルバムに保存（アプリ側）
  - **注意**: キュレーション記事の登録・編集機能は管理画面側の機能です。`ADMIN_USER_STORIES.md`のEpic ADM-2を参照してください。

### Epic 17: ゲーミフィケーション要素 ✅ **2026年追加 - 習慣化と収益性の両立**
- [17-gamification.md](./user-stories/17-gamification.md)
  - US-068: ポイント獲得システム
  - US-069: バッジ獲得システム
  - US-070: ショップ機能
  - US-071: プロフィール画面でのバッジ・アイテム表示
  - US-083: 所持ポイント確認 ✅ **2026年追加 - ポイント管理**
  - US-084: ポイント取得方法確認 ✅ **2026年追加 - ポイント管理**
  - US-088: ポイント取得履歴確認 ✅ **2026年追加 - ポイント管理**
  - US-085: ショップ一覧表示 ✅ **2026年追加 - ショップ機能**
  - US-086: 交換済みアイテム確認 ✅ **2026年追加 - ショップ機能**
  - US-087: 交換アイテム詳細確認 ✅ **2026年追加 - ショップ機能**

---

## 優先度マトリックス

### Phase 1（必須）
- US-001, US-002: 認証（最高）
- US-004, US-005, US-005-1（年齢表示）, US-005-2（バースデー演出）, US-005-3（成長の節目通知）: ペット管理（最高）✅ **年齢自動算出機能とお祝い機能を含む**
- US-007, US-007-1: ペット削除・復元（中）✅ **Convexのドキュメント指向な特性を活用**
- US-008, US-008-1, US-009, US-013, US-013-1: 活動ログ記録・表示（最高）✅ **画像アップロード機能とタイムライン拡張機能を含む**
- US-010, US-011, US-012: その他の活動ログ（高）
- **US-011**: 日記投稿 ✅ **2026年更新 - シーン・感情・タグによる簡単記録**
- **US-073**: 日記のシーン・感情マスターデータ表示（高）✅ **2026年追加**
- **US-074**: 日記のフィルタリング（シーン・感情・時間帯・場所）（中）✅ **2026年追加**
- US-014, US-015: リマインダー設定・通知と完了（高）✅ **2026年追加 - 掃除のタイマー・リマインダー**
- US-078, US-078-1: 活動ログ削除・復元（中）✅ **Convexのドキュメント指向な特性を活用**
- US-018: 広告表示（無料ユーザー）（中）✅ **2026年追加 - さりげない広告配置**
- US-051, US-052, US-053, US-054: 画像管理機能（高）✅ **Convexのプライシングを考慮した設計**
- US-092, US-093, US-094, US-095: 動画管理機能（高）✅ **2026年追加 - Cloudflare R2移行**
- US-019-1, US-019-2, US-019-3: プレミアム権限管理（高）✅ **機能制限とUXをシームレスに繋ぐ設計**
- US-026, US-027, US-028, US-029: コラム・記事機能（最高）✅ **信頼性向上・フック機能**
  - **注意**: コラム投稿機能は管理画面側の機能です。`ADMIN_USER_STORIES.md`を参照してください。
- US-020, US-021, US-022, US-023: AI相談機能（最高）✅ **キラー機能**

### Phase 2（高優先度）
- US-055, US-056: ユーザーフィードバック機能（低）✅ **温かみのある離脱対応**
- US-057, US-058, US-059: メモリアル機能（高）✅ **非常にセンシティブな項目 - 思い出の保護**
- US-060, US-061, US-062, US-063, US-064: アルバム管理機能（高）✅ **思い出をテーマ別に整理**

### Phase 2（高）
- US-033, US-037, US-038: 共同管理（高）

### Phase 3（中〜高）
- US-039: フォロー中・おすすめタブ切り替え（最高）✅ **2026年版モダンSNS**
- US-040, US-041, US-042, US-043: SNS機能（高）
- US-044, US-045, US-046, US-048, US-049, US-050: 商品DB・レビュー（高）
  - **注意**: 商品承認機能（US-047）は管理画面側の機能です。`ADMIN_USER_STORIES.md`のADM-007を参照してください。
- US-068, US-069, US-083, US-084, US-088: ゲーミフィケーション要素（高）✅ **習慣化と収益性の両立**
- US-070, US-085, US-086, US-087: ショップ機能（中）✅ **ポイント交換と現金購入**
- US-071: プロフィール画面でのバッジ・アイテム表示（中）✅ **ゲーミフィケーション要素**

---

## 開発の開始

### Phase 1: 最高優先度から始める

このドキュメントは開発の「憲法」として機能します。`.cursor/rules/PROJECT.md`から参照され、CursorなどのAI開発ツールが自動的に参照します。

**推奨される開発順序**:

1. **US-004: ペット登録**から**US-008: 食事記録**までの一連の画面フローを実装
   - 「登録して、記録して、見る」というアプリの心臓部を動かす
   - これにより、アプリの基本的な価値を実現できる

2. **US-027: コラム詳細表示**と**US-020: AI相談の開始**を連動させて実装
   - キラー機能とフック機能の連動を実現
   - コラムの末尾にAI相談ボタンを配置

3. **US-039: フォロー中・おすすめタブ切り替え**を実装
   - 2026年版モダンSNSの核心機能

4. **US-042: いいね機能**を拡張して実装
   - 専門家のいいね機能を追加
   - 信頼できる飼い主の証を実装

### AIへの指示例

**最初のプロンプト**:
```
ユーザーストーリードキュメントの US-004（ペット登録）から US-008（食事記録）までの
一連の画面フローを実装してください。

特に、各ストーリーの『受け入れ基準』と『体験価値』を重視して、
単なるデータ入力フォームではなく、ユーザーの体験価値が込められた機能を作成してください。

Sequential Thinkingを使って、実装手順を思考ステップごとに書き出してから実装してください。
```

---

## 技術的考慮事項

### パフォーマンス
- タイムライン表示の最適化（ページネーション）
- 画像の最適化（リサイズ、圧縮）
- 検索機能の最適化（インデックス活用）

### セキュリティ
- 認証・認可の実装
- データアクセス制御
- 入力検証

### UX
- オフライン対応の検討
- リアルタイム更新
- エラーハンドリング
