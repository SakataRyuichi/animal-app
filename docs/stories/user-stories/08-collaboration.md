# Epic 8: 共同管理

**📚 インデックス**: [USER_STORIES_INDEX.md](../USER_STORIES_INDEX.md)

## 共同管理

#### US-033: 共同管理者の追加
**画面パス**: `app/pets/[id]/index.tsx`（設定メニューから）
**As a** 家族やパートナーと一緒にペットを育てている飼い主  
**I want to** 家族メンバーを共同管理者として追加する  
**So that** 家族全員でペットの記録を共有し、誰がいつ何をしたかが分かり、ペットの健康管理を協力して行える。また、一人が忙しい時でも他の家族が記録を続けられる

**受け入れ基準**:
- メールアドレスまたはユーザー名で簡単に検索でき、家族メンバーを見つけやすい
- 権限（admin/editor/viewer）が分かりやすく説明され、適切な権限を選択できる
- 追加後、共同管理者一覧に表示され、誰が管理しているか一目で分かる
- 追加されたユーザーに通知が送られ、招待がスムーズに伝わる
- 招待メッセージに「一緒にペットの健康管理をしましょう」という温かいメッセージが含まれる
- 既にアプリを使っているユーザーは即座にアクセスでき、新規ユーザーは簡単に登録できる

**体験価値**:
- **協力**: 家族全員でペットの健康管理を協力して行え、負担が分散される
- **透明性**: 誰がいつ何を記録したかが分かり、情報共有がスムーズ
- **継続性**: 一人が忙しくても他の家族が記録を続けられ、記録の継続性が保たれる

**使用シーン**:
- 夫婦でペットを飼っている場合、両方が記録できる
- 親子でペットを飼っている場合、子供も記録に参加できる
- シッターやペットホテルに一時的に預ける場合、記録を共有できる

**優先度**: 高

---

---

#### US-034: 共同管理者一覧表示
**画面パス**: `app/pets/[id]/index.tsx`（設定メニューから）
**As a** ペット所有者  
**I want to** 共同管理者の一覧を見る  
**So that** 誰が管理しているか確認できる

**受け入れ基準**:
- 共同管理者が一覧で表示される
- 権限が表示される
- 追加日時が表示される

**優先度**: 高

---

---

#### US-035: 権限の変更
**画面パス**: `app/pets/[id]/index.tsx`（設定メニューから）
**As a** ペット所有者（admin）  
**I want to** 共同管理者の権限を変更する  
**So that** 適切な権限を設定できる

**受け入れ基準**:
- admin権限を持つユーザーのみ変更できる
- 権限をadmin/editor/viewerから選択できる
- 変更が即座に反映される

**優先度**: 中

---

---

#### US-036: 共同管理者の削除
**画面パス**: `app/pets/[id]/index.tsx`（設定メニューから）
**As a** ペット所有者（admin）  
**I want to** 共同管理者を削除する  
**So that** 不要なアクセスを削除できる

**受け入れ基準**:
- admin権限を持つユーザーのみ削除できる
- 削除確認ダイアログが表示される
- 削除後、共同管理者一覧から消える

**優先度**: 中

---

---

#### US-037: 共有ペット一覧表示
**画面パス**: `app/(tabs)/pets.tsx`（共有ペットタブ）
**As a** 共同管理者  
**I want to** 自分が管理できるペットの一覧を見る  
**So that** 共有されているペットにアクセスできる

**受け入れ基準**:
- 自分がownerIdのペットが表示される
- 自分がpet_membersに含まれているペットが表示される
- 権限が表示される

**優先度**: 最高

---

---

#### US-038: 共有ペットへの記録
**画面パス**: `app/pets/[id]/activities/[type].tsx`（共有ペットの場合）
**As a** 家族の一員としてペットの記録を担当している共同管理者  
**I want to** 共有ペットの活動ログを記録する  
**So that** 家族全員が同じ情報を共有でき、誰がいつ何を記録したかが分かり、ペットの健康管理を協力して行える。また、一人が記録を忘れても他の家族が補完できる

**受け入れ基準**:
- editor権限以上で記録でき、権限に応じた適切なアクセス制御がされる
- 記録者（createdBy）が記録に表示され、「お父さんが記録しました」のように誰が記録したかが分かる
- すべての共同管理者が記録をリアルタイムで見られ、情報共有がスムーズ
- 記録時に「家族全員に通知しますか？」というオプションがあり、重要な記録を家族に知らせられる
- 記録の編集・削除は記録者本人またはadmin権限のみが可能で、誤操作を防げる

**体験価値**:
- **協力**: 家族全員でペットの記録を協力して行え、負担が分散される
- **透明性**: 誰がいつ何を記録したかが分かり、情報共有がスムーズ
- **安心感**: 一人が記録を忘れても他の家族が補完でき、記録の継続性が保たれる

**使用シーン**:
- お父さんが朝の散歩を記録し、家族全員が確認できる
- お母さんが食事を記録し、お父さんも同じ情報を見られる
- 子供がペットと遊んだ日記を記録し、家族全員が思い出を共有できる

**優先度**: 最高

---

