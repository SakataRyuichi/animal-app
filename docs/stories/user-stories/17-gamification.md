# Epic 17: ゲーミフィケーション要素

**📚 インデックス**: [USER_STORIES_INDEX.md](../USER_STORIES_INDEX.md)

## Epic 17: ゲーミフィケーション要素

#### US-068: ポイント獲得システム
**画面パス**: `app/pets/[id]/activities/[type].tsx`（記録完了時、バックエンド処理）

**As a** ペットの健康管理を習慣化したい飼い主  
**I want to** 活動ログ（餌、トイレ、日記）を記録するたびにポイントを獲得する  
**So that** 毎日の記録が楽しくなり、継続的な健康管理ができる

**受け入れ基準**:
- 餌の記録: 5pt（1日3回までOK、計15pt）
- トイレの記録: 5pt（1日2回までOK、計10pt）
- 日記の更新: 10pt（1日1回）
- 1日の最大獲得ポイント: 30pt
- ポイント獲得時にアニメーションで通知が表示される
- ポイント獲得履歴が記録され、後から確認できる

**体験価値**:
- **習慣化**: 毎日の記録が楽しくなり、継続的な健康管理ができる
- **達成感**: ポイントが貯まっていくことで、継続のモチベーションが上がる
- **透明性**: ポイント獲得履歴が記録されることで、不正防止と透明性が確保される

**使用シーン**:
- 散歩後のトイレタイムに記録して5ポイント獲得
- 朝・昼・夜の3回の餌の記録で15ポイント獲得
- 1日の記録を振り返って日記を書いて10ポイント獲得

**優先度**: High

---

---

#### US-069: バッジ獲得システム
**画面パス**: `app/(tabs)/profile.tsx`（バッジ獲得時、バックエンド処理）

**As a** ペットの健康管理を継続している飼い主  
**I want to** 達成条件を満たすとバッジを獲得する  
**So that** 自分の努力が可視化され、他のユーザーにも認められる（グローバル表示の場合）

**受け入れ基準**:
- バッジは「金で買えない名誉」として設計（ポイントや現金では購入不可）
- バッジ獲得条件の例:
  - 「健康の守護者」: トイレと餌の記録を連続30日達成
  - 「愛の語り部」: 日記を累計100件投稿
- バッジ獲得時に祝福のアニメーションが表示される
- 獲得したバッジはプロフィール画面に表示される
- グローバル表示のバッジは、他のユーザーのペットプロフィールにも表示される

**体験価値**:
- **承認欲求**: 自分の努力が可視化され、他のユーザーにも認められる
- **継続のモチベーション**: バッジ獲得を目標に、継続的な記録ができる
- **コミュニティの質**: グローバル表示により、真剣にペットを大切にしている飼い主が可視化される

**使用シーン**:
- 連続30日の記録達成で「健康の守護者」バッジを獲得
- 累計100件の日記投稿で「愛の語り部」バッジを獲得
- 他のユーザーのペットプロフィールで、獲得したバッジを確認

**優先度**: High

---

---

#### US-070: ショップ機能
**画面パス**: `app/shop/[id].tsx`（購入アクション）

**As a** ポイントを貯めた飼い主、または即座にアイテムを手に入れたい飼い主  
**I want to** ポイントでアイテムを交換する、または現金で購入する  
**So that** ペットの写真を可愛く飾ったり、アルバムを素敵に装飾できる

**受け入れ基準**:
- ショップアイテムの種類:
  - 静止画フレーム: 500pt 〜 または 300円 〜
  - 動くフレーム: 2,000pt 〜 または 800円 〜
  - アルバム表紙: 1,000pt 〜 または 500円 〜
- ポイントが足りない場合は、現金購入への導線が表示される
- 現金購入の場合は、RevenueCatと連携して決済処理を行う
- 購入/交換済みのアイテムは、プロフィール画面やアルバム編集画面で使用できる
- 期間限定アイテムは、利用可能期間が明確に表示される

**体験価値**:
- **努力の報酬**: ポイントを貯めてアイテムを交換することで、継続のモチベーションが上がる
- **即時性**: 現金購入により、すぐにアイテムを手に入れられる
- **個性の表現**: 様々なフレームや表紙で、ペットの写真やアルバムを個性的に飾れる

**使用シーン**:
- 2週間コツコツ記録して500ポイントを貯め、静止画フレームを交換
- 数ヶ月継続して2,000ポイントを貯め、動くフレームを交換
- 季節限定のフレームが気に入ったので、800円で即座に購入

**優先度**: Medium

---

---

#### US-071: プロフィール画面でのバッジ・アイテム表示
**画面パス**: `app/(tabs)/profile.tsx`

**As a** バッジやアイテムを獲得した飼い主  
**I want to** プロフィール画面で獲得したバッジやアイテムを確認できる  
**So that** 自分の努力の成果を振り返り、ペットの写真を可愛く飾れる

**受け入れ基準**:
- プロフィール画面に「獲得したバッジ」セクションが表示される
- プロフィール画面に「所有しているアイテム」セクションが表示される
- バッジをタップすると、バッジの説明と獲得日時が表示される
- アイテムをタップすると、アイテムの詳細と使用可能な場所が表示される
- 獲得したフレームは、ペットの写真に適用して表示できる

**体験価値**:
- **達成感**: 獲得したバッジやアイテムを確認することで、自分の努力の成果を振り返れる
- **個性の表現**: 様々なフレームでペットの写真を個性的に飾れる
- **継続のモチベーション**: バッジやアイテムが増えていくことで、継続的な記録ができる

**使用シーン**:
- プロフィール画面を開いて、獲得したバッジを確認
- プロフィール画面で、所有しているフレームを選択してペットの写真に適用
- 他のユーザーのペットプロフィールで、グローバル表示のバッジを確認

**優先度**: Medium

---

---

#### US-083: 所持ポイント確認 ✅ **2026年追加 - ポイント管理**
**画面パス**: `app/points/index.tsx`, `app/(tabs)/profile.tsx`

**As a** ポイントを貯めている飼い主  
**I want to** 自分の現在の所持ポイントを確認する  
**So that** どのくらいポイントが貯まっているか、ショップで何が買えるかが分かる

**受け入れ基準**:
- プロフィール画面またはショップ画面に現在の所持ポイントが大きく表示される
- ポイント数が視覚的に分かりやすく表示される（例: 1,234pt）
- ポイントの増減がリアルタイムで反映される
- ポイント獲得履歴へのリンクが表示される（US-068の履歴画面へ）

**体験価値**:
- **透明性**: 自分のポイント残高が明確に分かり、ショップでの購入計画が立てられる
- **達成感**: ポイントが貯まっていく様子を確認することで、継続のモチベーションが上がる

**使用シーン**:
- ショップでアイテムを購入する前に、現在のポイントを確認
- プロフィール画面で自分のポイント残高を確認
- ポイント獲得後に、増えたポイントを確認

**優先度**: High

---

---

#### US-084: ポイント取得方法確認 ✅ **2026年追加 - ポイント管理**
**画面パス**: `app/points/methods.tsx`

**As a** ポイントを増やしたい飼い主  
**I want to** ポイントの取得方法を確認する  
**So that** どのようにポイントを獲得できるかが分かり、効率的にポイントを貯められる

**受け入れ基準**:
- ポイント取得方法の一覧が表示される
- 各取得方法のポイント数が明記される:
  - 餌の記録: 5pt（1日3回までOK、計15pt）
  - トイレの記録: 5pt（1日2回までOK、計10pt）
  - 日記の更新: 10pt（1日1回）
  - 1日の最大獲得ポイント: 30pt
- 各取得方法の説明が分かりやすく表示される
- 各取得方法から直接記録画面に遷移できる（例: 「餌の記録」をタップすると餌記録画面へ）

**体験価値**:
- **明確性**: ポイントの取得方法が明確に分かり、効率的にポイントを貯められる
- **導線**: 各取得方法から直接記録画面に遷移できることで、スムーズにポイント獲得できる

**使用シーン**:
- ショップで欲しいアイテムがあるが、ポイントが足りない時
- ポイントを増やす方法を知りたい時
- 1日の最大獲得ポイントを確認したい時

**優先度**: Medium

---

---

#### US-085: ショップ一覧表示 ✅ **2026年追加 - ショップ機能**
**画面パス**: `app/shop/index.tsx`

**As a** ポイントでアイテムを交換したい飼い主  
**I want to** ショップで利用可能なアイテムの一覧を見る  
**So that** どのアイテムが交換可能か、ポイントで買えるか現金で買えるかが分かる

**受け入れ基準**:
- ショップ画面で利用可能なアイテムが一覧表示される
- アイテムの種類別にカテゴリ分けされる（静止画フレーム、動くフレーム、アルバム表紙など）
- 各アイテムに以下の情報が表示される:
  - アイテム名
  - アイテム画像（プレビュー）
  - ポイント価格（例: 500pt）
  - 現金価格（例: 300円、または「ポイント限定」）
  - 交換済みかどうか（所有している場合は「所有済み」と表示）
- フィルター機能:
  - ポイントで購入可能なアイテムのみ表示
  - 現金で購入可能なアイテムのみ表示
  - 期間限定アイテムのみ表示
- ソート機能:
  - ポイント価格順（安い順・高い順）
  - 現金価格順（安い順・高い順）
  - 新着順

**体験価値**:
- **選択の容易さ**: アイテムの一覧を見ることで、どのアイテムを交換するか決めやすい
- **透明性**: ポイント価格と現金価格が明確に表示されることで、購入判断がしやすい

**使用シーン**:
- ショップ画面を開いて、利用可能なアイテムを確認
- ポイントで購入できるアイテムを探す
- 期間限定アイテムを確認する

**優先度**: High

---

---

#### US-086: 交換済みアイテム確認 ✅ **2026年追加 - ショップ機能**
**画面パス**: `app/shop/my-items.tsx`, `app/(tabs)/profile.tsx`

**As a** アイテムを交換した飼い主  
**I want to** 自分が交換済みのアイテムを確認する  
**So that** どのアイテムを持っているかが分かり、プロフィールやアルバムで使用できる

**受け入れ基準**:
- プロフィール画面またはショップ画面に「所有しているアイテム」セクションが表示される
- 交換済みアイテムが一覧で表示される
- 各アイテムに以下の情報が表示される:
  - アイテム名
  - アイテム画像（プレビュー）
  - 交換日時（または購入日時）
  - 交換方法（ポイント交換 / 現金購入）
- アイテムをタップすると、アイテムの詳細画面に遷移する（US-087）
- アイテムをタップすると、使用可能な場所（プロフィール、アルバムなど）が表示される
- アイテムを直接使用できる（例: フレームを選択してペットの写真に適用）

**体験価値**:
- **所有感**: 交換済みアイテムを確認することで、自分の努力の成果を実感できる
- **使いやすさ**: 所有しているアイテムから直接使用できることで、スムーズにアイテムを活用できる

**使用シーン**:
- プロフィール画面で、所有しているアイテムを確認
- アルバム編集画面で、使用可能な表紙を確認
- ペットの写真にフレームを適用する時

**優先度**: Medium

---

---

#### US-087: 交換アイテム詳細確認 ✅ **2026年追加 - ショップ機能**
**画面パス**: `app/shop/[id].tsx`

**As a** アイテムの詳細を知りたい飼い主  
**I want to** ショップアイテムの詳細情報を確認する  
**So that** アイテムの内容や使い方が分かり、購入判断ができる

**受け入れ基準**:
- アイテム詳細画面で以下の情報が表示される:
  - アイテム名
  - アイテム画像（プレビュー、または実際の使用例）
  - アイテムの説明（どのようなアイテムか、どのように使えるか）
  - ポイント価格（例: 500pt）
  - 現金価格（例: 300円、または「ポイント限定」）
  - アイテムの種類（静止画フレーム、動くフレーム、アルバム表紙など）
  - 使用可能な場所（プロフィール、アルバムなど）
  - 期間限定アイテムの場合、利用可能期間が表示される
- 所有しているアイテムの場合:
  - 「所有済み」と表示される
  - 「使用する」ボタンが表示され、直接使用できる
- 所有していないアイテムの場合:
  - 「ポイントで交換」ボタンが表示される（ポイントが足りる場合）
  - 「現金で購入」ボタンが表示される（現金購入可能な場合）
  - ポイントが足りない場合、「ポイントが足りません」と表示され、現金購入への導線が表示される
- アイテムのプレビューが表示される（実際に使用した場合の見た目）

**体験価値**:
- **情報の明確性**: アイテムの詳細が分かることで、購入判断がしやすい
- **使いやすさ**: 所有しているアイテムから直接使用できることで、スムーズにアイテムを活用できる

**使用シーン**:
- ショップで気になるアイテムの詳細を確認
- アイテムを購入する前に、内容を確認
- 所有しているアイテムの詳細を確認して、使用方法を確認

**優先度**: Medium

---

#### US-088: ポイント取得履歴確認 ✅ **2026年追加 - ポイント管理**
**画面パス**: `app/points/history.tsx`

**As a** ポイントの取得状況を確認したい飼い主  
**I want to** 自分のポイント取得履歴を確認する  
**So that** どのようにポイントを獲得したか、いつ獲得したかが分かり、ポイント獲得の透明性が確保される

**受け入れ基準**:
- ポイント取得履歴画面で、時系列順に履歴が表示される
- 各履歴に以下の情報が表示される:
  - 獲得/消費日時
  - ポイント数（獲得の場合は正の値、消費の場合は負の値）
  - 理由（例: 「餌の記録」「トイレの記録」「日記の更新」「アイテム購入」など）
  - 関連する活動ログへのリンク（ポイント獲得の場合）
  - 関連するアイテムへのリンク（ポイント消費の場合）
- フィルター機能:
  - 獲得のみ表示
  - 消費のみ表示
  - 期間でフィルター（今日、今週、今月、全期間）
- ソート機能:
  - 新しい順（デフォルト）
  - 古い順
  - ポイント数順（多い順・少ない順）
- ページネーション機能（履歴が多い場合）
- 合計獲得ポイントと合計消費ポイントが表示される

**体験価値**:
- **透明性**: ポイントの取得状況が明確に分かり、不正防止と透明性が確保される
- **振り返り**: どのようにポイントを獲得したかを振り返ることで、継続のモチベーションが上がる
- **管理**: ポイントの使用状況を確認することで、今後のポイント管理に役立つ

**使用シーン**:
- プロフィール画面からポイント取得履歴を確認
- 今月どれくらいポイントを獲得したか確認
- どの活動でポイントを獲得したか振り返る
- ポイントを消費した履歴を確認

**優先度**: Medium

---

---

