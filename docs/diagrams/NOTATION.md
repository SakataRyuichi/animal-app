# ER図の表記ルール（視認性・非エンジニア向け）

スキーマやER図を、エンジニア以外にも読みやすくするためのルールです。

## 方針

- **カンマで列を並べない** … 1行に1項目。何が列なのか一目で分かるようにする。
- **括弧 ( ) をなるべく使わない** … 説明は「：」（コロン）のうしろに日本語で書く。
- **略語は凡例で説明** … PK／FK は凡例で「主キー」「ほかのテーブルへの参照」と書く。
- **取り得る値は実際のスキーマ値のまま** … 日本語に訳さず、individual／business や image／video のように**実値**を「／」で区切る。コードと差異が出ないようにする。
- **技術用語には一言補足** … 例：r2Key → 「保存先のパス」、deletion → 「削除フラグ（復元可）」のように、図中または凡例で補足する。

## 図中の書き方（テーブル形式）

各テーブル（エンティティ）は **2列の表** で書く。

| 列 | 内容 |
|----|------|
| 左列（Key） | フィールド名（id, name, type など） |
| 右列（値） | 説明・取り得る値・主キー／参照の注記。特になければ空欄 |

draw.io のセル内で HTML の `<table>` を使い、「Key \| 値」の行を並べる。

| 避ける | 代わりに（右列に書く） |
|--------|------------------------|
| id (PK) | 主キー |
| ownerId FK → users | → users |
| type (food\|toilet) | food／toilet／walk／…（実値のまま） |
| r2Key, r2Url を1行に | 1行1項目で、左列に r2Key / r2Url、右列に説明または空欄 |
| deletion (論理削除) | 削除フラグ（復元可） |

## 凡例でそろえておく用語

- **主キー** … その表の中で1件を一意に指す列。
- **→ 〇〇** … 「〇〇テーブルのどの行か」を指す列（外部キー）。
- **1 : N** … 「1件の〇〇に、複数の△△が紐づく」という関係。
- **削除フラグ** … 論理削除。消した扱いにするが、一定期間は復元できる。

---

このルールに従った図を `er-diagram.drawio` に反映しています。
